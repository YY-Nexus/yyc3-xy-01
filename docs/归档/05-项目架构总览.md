---
文档编号: DOC-05
文档名称: 项目架构总览
文档类型: 核心文档
版本: 1.0
作者: YYC
创建日期: 2024-10-15
更新日期: 2024-10-15
审核人: 
---

# 项目架构总览

## 1. 文档概述

### 1.1 文档目的

本文档是YYC3-xy-ai项目的架构总览，整合了项目的文件架构、组件设计、数据库设计、API设计等核心规范，为项目开发、维护和扩展提供全面的架构指导。

### 1.2 适用范围

本文档适用于YYC3-xy-ai项目的所有开发人员、测试人员、架构师和项目管理人员。

### 1.3 参考文档

- [DOC-00 文档索引](00-文档索引.md)
- [DOC-01 项目架构规范](01-项目架构规范.md)
- [DOC-03 组件开发规范](03-组件开发规范.md)
- [DOC-04 数据库设计规范](04-数据库设计规范.md)

## 2. 项目概述

### 2.1 项目简介

YYC3-xy-ai是一个基于Next.js和TypeScript的智能育儿平台，提供AI辅助育儿建议、成长记录、亲子互动等功能。

### 2.2 核心功能

- AI智能育儿助手
- 成长记录与分析
- 亲子互动推荐
- 儿童发展评估
- 个性化学习内容推荐

## 3. 技术栈

### 3.1 前端技术栈

- **框架**: Next.js 14+ (App Router)
- **语言**: TypeScript 5.0+
- **UI框架**: Tailwind CSS 3.3+
- **UI组件库**: Radix UI
- **状态管理**: React Context + Hooks
- **API请求**: Next.js API Routes

### 3.2 后端技术栈

- **运行环境**: Node.js 20+
- **数据库**: SQLite (开发), PostgreSQL (生产)
- **ORM**: Prisma
- **认证**: NextAuth.js

### 3.3 开发工具

- **包管理器**: pnpm
- **代码检查**: ESLint
- **代码格式化**: Prettier
- **测试框架**: Jest
- **构建工具**: Next.js Build System

## 4. 项目架构

### 4.1 整体架构

```
┌─────────────────────────────────────────────────────────┐
│                     前端应用层                           │
│  ┌─────────────────────────────────────────────────────┐ │
│  │                    页面组件                           │ │
│  │  (app/[locale]/(main)/(ai)/ai-chat/page.tsx)         │ │
│  └─────────────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────────────┐ │
│  │                    功能组件                           │ │
│  │  (components/ai-creative/StoryCreator.tsx)          │ │
│  └─────────────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────────────┐ │
│  │                    UI组件                             │ │
│  │  (components/ui/Button.tsx)                          │ │
│  └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
          │
          ▼
┌─────────────────────────────────────────────────────────┐
│                     API层                                │
│  ┌─────────────────────────────────────────────────────┐ │
│  │                  API路由                              │ │
│  │  (app/api/ai/chat/route.ts)                         │ │
│  └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
          │
          ▼
┌─────────────────────────────────────────────────────────┐
│                     业务逻辑层                           │
│  ┌─────────────────────────────────────────────────────┐ │
│  │                  服务层                                │ │
│  │  (lib/services/aiService.ts)                         │ │
│  └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
          │
          ▼
┌─────────────────────────────────────────────────────────┐
│                     数据层                                │
│  ┌─────────────────────────────────────────────────────┐ │
│  │                  数据库客户端                          │ │
│  │  (lib/db/client.ts)                                  │ │
│  └─────────────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────────────┐ │
│  │                  数据模型                              │ │
│  │  (types/ai.ts)                                       │ │
│  └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 4.2 文件结构

```
├── app/                      # Next.js App Router
│   ├── [locale]/             # 国际化支持
│   │   ├── (main)/           # 主布局
│   │   │   ├── (ai)/         # AI相关功能
│   │   │   │   ├── ai-chat/  # AI聊天页面
│   │   │   │   └── growth/   # 成长分析页面
│   │   │   └── activities/   # 活动页面
│   │   └── api/              # API路由
│   │       └── ai/           # AI相关API
│   ├── globals.css           # 全局样式
│   ├── layout.tsx            # 根布局
│   └── page.tsx              # 首页
├── components/               # 组件
│   ├── ui/                   # UI组件
│   │   ├── Button.tsx        # 按钮组件
│   │   └── Card.tsx          # 卡片组件
│   ├── ai-creative/          # AI创意功能组件
│   └── performance/          # 性能优化组件
├── lib/                      # 工具库
│   ├── db/                   # 数据库相关
│   ├── services/             # 业务服务
│   └── utils/                # 通用工具
├── types/                    # TypeScript类型定义
├── public/                   # 静态资源
├── docs/                     # 项目文档
├── .gitignore                # Git忽略文件
├── eslint.config.js          # ESLint配置
├── next.config.js            # Next.js配置
├── package.json              # 项目依赖
├── postcss.config.mjs        # PostCSS配置
├── tailwind.config.js        # Tailwind CSS配置
└── tsconfig.json             # TypeScript配置
```

## 5. 组件设计规范

### 5.1 组件分类

- **UI组件**: 基础UI元素，如按钮、卡片等
- **功能组件**: 特定功能模块，如故事创建器、成长记录器等
- **页面组件**: 完整页面，如AI聊天页面、成长分析页面等

### 5.2 组件命名规范

- 组件名称使用PascalCase
- 文件名与组件名一致
- 功能组件按照功能模块组织
- UI组件放在components/ui目录下

### 5.3 组件开发原则

- 单一职责原则
- 可复用性
- 可测试性
- 类型安全

## 6. 数据库设计规范

### 6.1 数据库架构

- **开发环境**: SQLite
- **生产环境**: PostgreSQL
- **客户端存储**: LocalStorage (缓存和临时数据)

### 6.2 核心数据模型

- **用户模型**: 用户信息、角色、权限
- **儿童模型**: 儿童档案、基本信息
- **成长模型**: 成长记录、发展评估
- **互动模型**: 亲子互动记录、推荐
- **AI生成内容模型**: AI聊天记录、故事创作、视频生成

### 6.3 数据访问层

- 使用Prisma作为ORM
- 实现数据访问抽象层
- 支持事务管理

## 7. API设计规范

### 7.1 API架构

- RESTful API设计风格
- 使用Next.js API Routes
- 支持国际化

### 7.2 API命名规范

- 使用小写字母和连字符
- 按照功能模块组织
- 动词使用HTTP方法

### 7.3 API安全

- 身份验证和授权
- 输入验证
- 错误处理
- 速率限制

## 8. 代码规范

### 8.1 TypeScript规范

- 严格类型检查
- 避免使用any类型
- 接口和类型定义清晰

### 8.2 React规范

- 函数式组件优先
- Hooks使用规范
- 组件拆分合理

### 8.3 代码风格

- ESLint检查
- Prettier格式化
- 统一的命名规范

## 9. 部署架构

### 9.1 部署环境

- **开发环境**: 本地开发服务器
- **测试环境**: Vercel Preview
- **生产环境**: Vercel Production

### 9.2 部署流程

- Git版本控制
- CI/CD自动化部署
- 环境变量管理

### 9.3 性能优化

- 静态资源优化
- 图片优化
- 代码分割
- 缓存策略

## 10. 监控和维护

### 10.1 监控系统

- 应用性能监控
- 错误监控
- 用户行为分析

### 10.2 维护流程

- 定期备份
- 安全更新
- 性能优化
- 功能迭代

## 11. 版本历史

| 版本 | 日期       | 作者 | 变更内容                     |
|------|------------|------|------------------------------|
| 1.0  | 2024-10-15 | YYC  | 初始版本                     |

---

<div align="center">

> 「***YanYuCloudCube***」
> 「***<admin@0379.email>***」
> 「***Words Initiate Quadrants, Language Serves as Core for the Future***」
> 「***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***」

</div>

